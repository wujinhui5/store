{"version":3,"file":"js/489.c9e63ca9.js","mappings":"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","sources":["webpack://store/./src/modules/formverify.js","webpack://store/./src/pages/login/components/ByPhoneCode.vue","webpack://store/./src/pages/login/components/ByPhoneCode.vue?976d"],"sourcesContent":["export function verify(str, reg, mess, expression = false) {\r\n    // reg：正则表达式； expression：表达式；mess：数组，验证结果\r\n    // 作用：验证表单输入str（字符串）是否正确，返回对应结果\r\n    // 正则表达式验证时，输入前三个参数\r\n    // expression验证时，reg输入0\r\n    if ((reg && reg.test(str)) || expression) {\r\n        return mess[1];\r\n    }\r\n    return mess[0];\r\n}","<template>\r\n  <table class=\"by-phone-code\">\r\n    <tr>\r\n      <td>手机号：</td>\r\n      <td class=\"container\">\r\n        <input type=\"text\" v-model=\"form.phone\" @blur=\"verifyPhone\" />\r\n      </td>\r\n    </tr>\r\n    <div class=\"false\">{{ errorMes.phone }}</div>\r\n    <tr>\r\n      <td>验证码：</td>\r\n      <td>\r\n        <input class=\"input-code\" v-model=\"form.code\" @focus=\"verifyCode\" />\r\n        <input\r\n          type=\"button\"\r\n          class=\"send-code\"\r\n          :style=\"buttonStyle\"\r\n          :disabled=\"sendCodeAbout.isDisabled\"\r\n          @click=\"sendMail\"\r\n          :value=\"sendCodeAbout.tip\"\r\n        />\r\n      </td>\r\n    </tr>\r\n    <div class=\"false\">{{ errorMes.code }}</div>\r\n    <input type=\"button\" class=\"loginButton\" @click=\"login\" value=\"登录\" />\r\n  </table>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport router from \"@/router\";\r\nimport \"element-plus/es/components/message/style/css\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { verify } from \"@/modules/formverify\";\r\n\r\nexport default {\r\n  setup() {\r\n    let form = reactive({\r\n      phone: \"\",\r\n      code: \"\",\r\n    });\r\n    let errorMes = reactive({\r\n      phone: \"\",\r\n      code: \"\",\r\n    });\r\n    let sendCodeAbout = reactive({\r\n      isDisabled: false,\r\n      tip: \"发送验证码\",\r\n    });\r\n\r\n    // 验证手机号\r\n    function verifyPhone() {\r\n      errorMes.phone = verify(\r\n        form.phone,\r\n        /^((1[3,5,8][0-9])|(14[5,7])|(17[0,5,6,7,8])|(19[7]))\\d{8}$/,\r\n        [\"手机号格式错误\", \"\"]\r\n      );\r\n\r\n      errorMes.phone = verify(\r\n        form.phone,\r\n        0,\r\n        [\"手机号不能为空\", errorMes.phone],\r\n        form.phone != \"\"\r\n      );\r\n    }\r\n\r\n    // 验证验证码\r\n    let isSendMail = false;\r\n    function verifyCode() {\r\n      errorMes.code = verify(\r\n        form.code,\r\n        0,\r\n        [\"验证码不能为空\", \"\"],\r\n        form.code != \"\"\r\n      );\r\n      errorMes.code = verify(\r\n        form.code,\r\n        0,\r\n        [\"请先发送手机验证码\", errorMes.code],\r\n        isSendMail\r\n      );\r\n    }\r\n\r\n    // 发送手机验证码\r\n    let buttonStyle = reactive({});\r\n    let store = useStore();\r\n    function sendMail() {\r\n      if (errorMes.phone || !form.phone) {\r\n        verifyPhone();\r\n        return;\r\n      }\r\n      // 这里发送请求,略\r\n\r\n      sendCodeAbout.isDisabled = true;\r\n      buttonStyle.cursor = \"not-allowed\";\r\n      buttonStyle.background = \"#c95960\";\r\n      let i = 61;\r\n      let timer = setInterval(() => {\r\n        i--;\r\n        sendCodeAbout.tip = [\"剩余\", i, \"秒\"].join(\"\");\r\n        if (!i) {\r\n          sendCodeAbout.tip = \"发送验证码\";\r\n          sendCodeAbout.isDisabled = false;\r\n          buttonStyle.cursor = \"\";\r\n          buttonStyle.background = \"\";\r\n          clearInterval(timer);\r\n          return;\r\n        }\r\n      }, 1000);\r\n      ElMessage.success(\"验证码为：123456\");\r\n      isSendMail = true;\r\n    }\r\n\r\n    //登录\r\n    function login() {\r\n      verifyPhone();\r\n      verifyCode();\r\n      if (errorMes.phone || errorMes.code) return;\r\n      let data = JSON.stringify(form);\r\n      store\r\n        .dispatch(\"user/loginByCode\", data)\r\n        .then((res) => {\r\n          router.push(\"/\");\r\n          ElMessage.success(res);\r\n        })\r\n        .catch((err) => {\r\n          if (err.status === 998) {\r\n            errorMes.phone = err.msg;\r\n          } else {\r\n            errorMes.code = err.msg;\r\n          }\r\n        });\r\n    }\r\n\r\n    return {\r\n      form,\r\n      errorMes,\r\n      sendCodeAbout,\r\n      buttonStyle,\r\n      verifyPhone,\r\n      verifyCode,\r\n      sendMail,\r\n      login,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style src=\"@/assets/less/loginForm.less\" lang=\"less\" scoped></style>\r\n\r\n<style scoped>\r\n.input-code {\r\n  width: 168px !important;\r\n  height: 36px !important;\r\n  border: 1px solid #999999 !important;\r\n  border-right: 0 !important;\r\n  outline: none !important;\r\n  vertical-align: bottom !important;\r\n}\r\n\r\n.send-code {\r\n  width: 80px !important;\r\n  height: 36px !important;\r\n  border: 0 !important;\r\n  color: #fff;\r\n  background-color: #c81623;\r\n  text-align: center;\r\n  line-height: 34px;\r\n  cursor: pointer;\r\n}\r\n</style>","import { render } from \"./ByPhoneCode.vue?vue&type=template&id=b1d3aa70&scoped=true\"\nimport script from \"./ByPhoneCode.vue?vue&type=script&lang=js\"\nexport * from \"./ByPhoneCode.vue?vue&type=script&lang=js\"\n\nimport \"@/assets/less/loginForm.less?vue&type=style&index=0&id=b1d3aa70&lang=less&scoped=true\"\nimport \"./ByPhoneCode.vue?vue&type=style&index=1&id=b1d3aa70&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\吴锦辉\\\\桌面文件\\\\案例\\\\store\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b1d3aa70\"]])\n\nexport default __exports__"],"names":["verify","str","reg","mess","expression","test","class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","type","$setup","phone","onBlur","_hoisted_4","_hoisted_5","code","onFocus","style","disabled","isDisabled","onClick","value","tip","_hoisted_7","setup","form","reactive","errorMes","sendCodeAbout","verifyPhone","isSendMail","verifyCode","buttonStyle","store","useStore","sendMail","cursor","background","i","timer","setInterval","join","clearInterval","ElMessage","login","data","JSON","stringify","dispatch","then","res","router","catch","err","status","msg","__exports__","render"],"sourceRoot":""}